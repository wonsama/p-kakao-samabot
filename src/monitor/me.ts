/*
    FILE : me.ts 
    TITLE : 나와의 채팅 모니터링
    CREATED : 2022.05.11
*/

/////////////////////////////////////////////////////////////////////
//
//  IMPORTS
//
import "dotenv/config";
import { CLIENT, login } from "../helper/kakao-login";
/////////////////////////////////////////////////////////////////////
//
//  CONSTS
//
const CHANNEL_ID_ME: number = parseInt(process.env.CHANNEL_ID_ME || "0");

/////////////////////////////////////////////////////////////////////
//
//  VARIABLES
//

/////////////////////////////////////////////////////////////////////
//
//  DEFAULTS
//

/////////////////////////////////////////////////////////////////////
//
//  PRIVATE FUNCTIONS
//

/////////////////////////////////////////////////////////////////////
//
//  EXPORTS FUNCTIONS
//

/////////////////////////////////////////////////////////////////////
//
//  INIT
//

// EntryPoint
async function init() {
  login();
}

// EntryPoint Call
init().catch((err) => {
  console.log(err);
});

CLIENT.on("chat", (data, channel) => {
  if (channel.channelId.toNumber() == CHANNEL_ID_ME) {
    console.log(data.text);
  }
});
