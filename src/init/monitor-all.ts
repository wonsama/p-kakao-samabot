/*
    FILE : monitor-all.ts 
    TITLE : 모든 채팅을 모니터링 
    CREATED : 2022.05.11
*/

/////////////////////////////////////////////////////////////////////
//
//  IMPORTS
//
import "dotenv/config";
import { CLIENT, login } from "../helper/kakao-login";
/////////////////////////////////////////////////////////////////////
//
//  CONSTS
//

/////////////////////////////////////////////////////////////////////
//
//  VARIABLES
//

/////////////////////////////////////////////////////////////////////
//
//  DEFAULTS
//

/////////////////////////////////////////////////////////////////////
//
//  PRIVATE FUNCTIONS
//

/////////////////////////////////////////////////////////////////////
//
//  EXPORTS FUNCTIONS
//

/////////////////////////////////////////////////////////////////////
//
//  INIT
//

// EntryPoint
async function init() {
  login();
}

// EntryPoint Call
init().catch((err) => {
  console.log(err);
});

// 수신한 정보를 출력한다.
// 데이터 구조 확인용 (채널 및 기타 정보)
CLIENT.on("chat", (data, channel) => {
  const sender = data.getSenderInfo(channel);
  if (!sender) return;
  console.log(channel);
  console.log("=====================");
  console.log(data);
});
