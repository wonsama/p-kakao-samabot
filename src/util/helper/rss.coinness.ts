/*
    FILE : 
      coinness.ts 
    TITLE : 
      coinness api
    CREATED : 
      2022.05.13
*/

/////////////////////////////////////////////////////////////////////
//
//  IMPORT
//
import axios from "axios";
import { COINNESS } from "./rss";
/////////////////////////////////////////////////////////////////////
//
//  CONST
//

const COINNESS_ARTICLES_URL: string = "/articles?limit=20&section=latest";

/////////////////////////////////////////////////////////////////////
//
//  VARIABLE
//

/////////////////////////////////////////////////////////////////////
//
//  DEFAULT
//
const instance = axios.create({
  baseURL: COINNESS.url,
  timeout: 1000,
});
/////////////////////////////////////////////////////////////////////
//
//  TYPE
//
export interface ARTICLE_TYPE {
  id: number;
  title: string;
  link: string;
  thumbnailImage: string;
  contentImage: string;
  publishAt: string;
  source: {
    nameKo: string;
    nameEn: string;
    link: string;
  };
  description: string;
}
/////////////////////////////////////////////////////////////////////
//
//  INTERFACE
//

/////////////////////////////////////////////////////////////////////
//
//  CLASS
//

/////////////////////////////////////////////////////////////////////
//
//  PRIVATE FUNCTION
//

/////////////////////////////////////////////////////////////////////
//
//  EXPORTS FUNCTION
//
export async function getFeeds(): Promise<ARTICLE_TYPE[]> {
  let res;
  try {
    res = await instance.get(COINNESS_ARTICLES_URL);
    return res.data;
  } catch (err) {
    return [];
  }
}

/////////////////////////////////////////////////////////////////////
//
//  INIT
//
